<div class="max-w-5xl mx-auto p-6 animate-in fade-in slide-in-from-bottom-4 duration-700">
  
  <!-- Header -->
  <div class="flex items-center justify-between mb-8">
    <div>
      <h2 class="text-3xl font-extrabold text-gray-900 tracking-tight">Create Customer Order</h2>
      <p class="text-gray-500 mt-1 font-medium">Register a new transaction and define product line items.</p>
    </div>
    <button routerLink="/dashboard/customers/orders" class="text-sm font-bold text-indigo-600 hover:text-indigo-800 transition">
      ‚Üê Back to Orders
    </button>
  </div>

  <div class="bg-white rounded-2xl shadow-xl shadow-gray-200/50 border border-gray-100 overflow-hidden">
    <!-- Section 1: Customer Details -->
    <div class="p-8 border-b border-gray-100 bg-gray-50/30">
      <div class="flex items-center gap-3 mb-6">
        <div class="h-8 w-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white">
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
        </div>
        <h3 class="text-lg font-bold text-gray-800">Customer Information</h3>
      </div>

      <div class="max-w-xs">
        <label class="block text-xs font-bold text-gray-400 uppercase tracking-widest mb-2">Customer ID</label>
        <input type="number" [(ngModel)]="customerOrder.customerId" 
               placeholder="Enter Client ID"
               class="w-full px-4 py-3 rounded-xl border-gray-200 focus:border-indigo-500 focus:ring-indigo-500 transition-all font-semibold text-gray-700 bg-white border shadow-sm" />
      </div>
    </div>

    <!-- Section 2: Product Line Items -->
    <div class="p-8">
      <div class="flex items-center justify-between mb-6">
        <div class="flex items-center gap-3">
          <div class="h-8 w-8 bg-amber-500 rounded-lg flex items-center justify-center text-white">
            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" /></svg>
          </div>
          <h3 class="text-lg font-bold text-gray-800">Order Items</h3>
        </div>
        
        <button (click)="addProduct()" 
                class="text-sm font-bold text-indigo-600 hover:bg-indigo-50 px-4 py-2 rounded-lg transition-all flex items-center gap-2">
          <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
          Add Product
        </button>
      </div>

      <!-- Table Header for Desktop -->
      <div class="hidden md:grid grid-cols-12 gap-4 px-4 mb-2 text-[10px] font-black text-gray-400 uppercase tracking-widest">
        <div class="col-span-3">Product ID</div>
        <div class="col-span-2">Quantity</div>
        <div class="col-span-3">Unit Price</div>
        <div class="col-span-3">Total Price</div>
        <div class="col-span-1"></div>
      </div>

      <div class="space-y-4">
        <div *ngFor="let product of customerOrder.productOrders; let i = index" 
             class="group grid grid-cols-1 md:grid-cols-12 gap-4 items-center bg-gray-50 p-4 rounded-2xl border border-transparent hover:border-indigo-100 hover:bg-white hover:shadow-md transition-all">
          
          <!-- Product ID -->
          <div class="col-span-3">
            <label class="md:hidden text-[10px] font-bold text-gray-400 uppercase mb-1 block">Product ID</label>
            <input type="number" [(ngModel)]="product.productId" 
                   class="w-full rounded-xl border-gray-200 focus:ring-indigo-500 border px-3 py-2 font-medium" />
          </div>

          <!-- Quantity -->
          <div class="col-span-2">
            <label class="md:hidden text-[10px] font-bold text-gray-400 uppercase mb-1 block">Quantity</label>
            <input type="number" [(ngModel)]="product.quantity" 
                   class="w-full rounded-xl border-gray-200 focus:ring-indigo-500 border px-3 py-2 font-medium" />
          </div>

          <!-- Unit Price -->
          <div class="col-span-3">
            <label class="md:hidden text-[10px] font-bold text-gray-400 uppercase mb-1 block">Unit Price</label>
            <div class="relative">
              <span class="absolute left-3 top-2 text-gray-400 text-sm">$</span>
              <input type="number" [(ngModel)]="product.unitPrice" 
                     class="w-full rounded-xl border-gray-200 focus:ring-indigo-500 border pl-7 pr-3 py-2 font-medium" />
            </div>
          </div>

          <!-- Total Price (Calculated) -->
          <div class="col-span-3">
            <label class="md:hidden text-[10px] font-bold text-gray-400 uppercase mb-1 block">Subtotal</label>
            <div class="px-3 py-2 bg-white border border-gray-100 rounded-xl font-black text-indigo-600 shadow-sm">
              {{ (product.quantity * product.unitPrice) | currency }}
            </div>
          </div>

          <!-- Remove Button -->
          <div class="col-span-1 text-right">
            <button (click)="removeProduct(i)" 
                    class="p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all">
              <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div *ngIf="customerOrder.productOrders.length === 0" 
           class="text-center py-12 border-2 border-dashed border-gray-100 rounded-2xl">
        <p class="text-gray-400 font-medium">No products added yet. Start by adding one.</p>
        <button (click)="addProduct()" class="mt-2 text-indigo-600 font-bold hover:underline">Add First Product</button>
      </div>
    </div>

    <!-- Section 3: Final Submit -->
    <div class="p-8 bg-gray-50/50 border-t border-gray-100 flex flex-col md:flex-row items-center justify-between gap-6">
      <div class="text-center md:text-left">
        <p class="text-xs font-bold text-gray-400 uppercase tracking-widest">Grand Total Amount</p>
        <!-- <p class="text-3xl font-black text-gray-900">{{ calculateGrandTotal() | currency }}</p> -->
      </div>

      <button (click)="submitCustomerOrder()" 
              class="w-full md:w-auto px-10 py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-black shadow-xl shadow-indigo-100 transition-all active:scale-95">
        Finalize & Submit Order
      </button>
    </div>
  </div>
</div>